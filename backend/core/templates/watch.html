<!DOCTYPE html>
<html>
<head>
    <title>Real-time Watch</title>
    <style>
        .watch-container {
            text-align: center;
            padding: 20px;
            font-family: monospace;
        }
        .time {
            font-size: 2em;
            margin: 10px;
        }
        .status {
            color: #666;
        }
    </style>
</head>
<body>
    <div class="watch-container">
        <div class="time" id="time">--:--:--</div>
        <div class="status" id="status">Connecting...</div>
    </div>
    
    <script>
        const watchSocket = new WebSocket(
            'ws://' + window.location.host + '/ws/watch/'
        );

        watchSocket.onmessage = function(e) {
            const data = JSON.parse(e.data);
            if (data.type === 'time_update') {
                document.querySelector('#time').textContent = data.time;
            }
        };

        watchSocket.onopen = function(e) {
            document.querySelector('#status').textContent = 'Connected';
        };

        watchSocket.onclose = function(e) {
            document.querySelector('#status').textContent = 'Disconnected';
            // Attempt to reconnect after 5 seconds
            setTimeout(function() {
                window.location.reload();
            }, 5000);
        };

        watchSocket.onerror = function(e) {
            document.querySelector('#status').textContent = 'Error occurred';
        };
    </script>
</body>
</html>